<div class="min-h-screen bg-gray-50 py-12">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <%= link_to "← Back to Components", root_path, class: "text-blue-600 hover:text-blue-800 mb-8 inline-block" %>
    
    <h1 class="text-3xl font-bold text-gray-900 mb-8">Icons</h1>

    <div class="space-y-12">
      <!-- Overview -->
      <section class="bg-white rounded-lg shadow p-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">Overview</h2>
        <p class="text-gray-600 mb-4">
          Icons are powered by the <code class="text-sm bg-gray-100 px-2 py-1 rounded">svg_icon</code> helper, 
          which loads SVG icons from the Heroicons collection. The helper supports custom styling, sizing, and caching for performance.
        </p>
        
        <div class="bg-blue-50 border border-blue-200 p-4 rounded mb-4">
          <h3 class="font-medium text-blue-900 mb-2">💡 Icon Override Support</h3>
          <p class="text-sm text-blue-800">
            Host applications can override engine icons or add custom icons by placing SVG files in 
            <code class="bg-blue-100 px-1 rounded">app/assets/images/</code>. 
            The system checks the host app first, then falls back to the engine's icons.
          </p>
        </div>
        
        <div class="bg-gray-50 p-4 rounded">
          <h3 class="font-medium text-gray-900 mb-2">Usage</h3>
          <pre class="text-sm text-gray-700"><code>&lt;%= svg_icon("heroicons/outline/home", class: "h-6 w-6 text-blue-500") %&gt;</code></pre>
        </div>
      </section>

      <!-- Common Sizes -->
      <section class="bg-white rounded-lg shadow p-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">Common Sizes</h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
          <div class="text-center">
            <%= svg_icon("heroicons/outline/home", class: "h-4 w-4 text-gray-600 mx-auto mb-2") %>
            <p class="text-xs text-gray-500">h-4 w-4</p>
          </div>
          <div class="text-center">
            <%= svg_icon("heroicons/outline/home", class: "h-5 w-5 text-gray-600 mx-auto mb-2") %>
            <p class="text-xs text-gray-500">h-5 w-5</p>
          </div>
          <div class="text-center">
            <%= svg_icon("heroicons/outline/home", class: "h-6 w-6 text-gray-600 mx-auto mb-2") %>
            <p class="text-xs text-gray-500">h-6 w-6</p>
          </div>
          <div class="text-center">
            <%= svg_icon("heroicons/outline/home", class: "h-8 w-8 text-gray-600 mx-auto mb-2") %>
            <p class="text-xs text-gray-500">h-8 w-8</p>
          </div>
        </div>
      </section>

      <!-- Icon Search -->
      <section class="bg-white rounded-lg shadow p-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">Icon Search</h2>
        <div class="relative">
          <input type="text" 
                 id="icon-search" 
                 class="w-full px-4 py-2 pr-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                 placeholder="Search icons by name...">
          <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
            <%= svg_icon("heroicons/outline/magnifying-glass", class: "h-5 w-5 text-gray-400") %>
          </div>
        </div>
        <p class="text-sm text-gray-500 mt-2">Type to filter icons across all collections</p>
      </section>

      <script>
        document.addEventListener('DOMContentLoaded', function() {
          const searchInput = document.getElementById('icon-search');
          if (searchInput) {
            searchInput.addEventListener('input', function(e) {
              const searchTerm = e.target.value.toLowerCase();
              const iconContainers = document.querySelectorAll('[data-icon-name]');
              
              iconContainers.forEach(container => {
                const iconName = container.getAttribute('data-icon-name').toLowerCase();
                if (searchTerm === '' || iconName.includes(searchTerm)) {
                  container.style.display = '';
                } else {
                  container.style.display = 'none';
                }
              });
              
              // Update section counts
              document.querySelectorAll('[data-icon-section]').forEach(section => {
                const visibleIcons = section.querySelectorAll('[data-icon-name]:not([style*="display: none"])').length;
                const countElement = section.querySelector('[data-icon-count]');
                if (countElement) {
                  const totalCount = section.querySelectorAll('[data-icon-name]').length;
                  if (searchTerm) {
                    countElement.textContent = `${visibleIcons} of ${totalCount} icons shown`;
                  } else {
                    countElement.textContent = `${totalCount} icons available`;
                  }
                }
              });
            });
          }
        });
      </script>

      <!-- Color Examples -->
      <section class="bg-white rounded-lg shadow p-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">Semantic Colors</h2>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
          <div class="text-center">
            <%= svg_icon("heroicons/outline/check-circle", class: "h-8 w-8 text-green-500 mx-auto mb-2") %>
            <p class="text-xs text-gray-500">Success (green)</p>
          </div>
          <div class="text-center">
            <%= svg_icon("heroicons/outline/exclamation-triangle", class: "h-8 w-8 text-yellow-500 mx-auto mb-2") %>
            <p class="text-xs text-gray-500">Warning (yellow)</p>
          </div>
          <div class="text-center">
            <%= svg_icon("heroicons/outline/x-mark", class: "h-8 w-8 text-red-500 mx-auto mb-2") %>
            <p class="text-xs text-gray-500">Error (red)</p>
          </div>
          <div class="text-center">
            <%= svg_icon("heroicons/outline/light-bulb", class: "h-8 w-8 text-blue-500 mx-auto mb-2") %>
            <p class="text-xs text-gray-500">Info (blue)</p>
          </div>
        </div>
      </section>

      <%
        # Helper method to get all icons from a directory
        def get_icons_from_dir(base_path, icon_set)
          icon_path = File.join(base_path, 'heroicons', icon_set, '*.svg')
          Dir.glob(icon_path).map { |path| File.basename(path, '.svg') }.sort
        end
        
        # Check both engine and host app paths
        engine_path = OkonomiUiKit::Engine.root.join('app', 'assets', 'images')
        host_path = Rails.root.join('app', 'assets', 'images')
        
        # Get all unique icons from both locations
        outline_icons = (get_icons_from_dir(engine_path, 'outline') + get_icons_from_dir(host_path, 'outline')).uniq.sort
        solid_icons = (get_icons_from_dir(engine_path, 'solid') + get_icons_from_dir(host_path, 'solid')).uniq.sort
        mini_icons = (get_icons_from_dir(engine_path, 'mini') + get_icons_from_dir(host_path, 'mini')).uniq.sort
        micro_icons = (get_icons_from_dir(engine_path, 'micro') + get_icons_from_dir(host_path, 'micro')).uniq.sort
      %>

      <!-- Outline Icons -->
      <section class="bg-white rounded-lg shadow p-6" data-icon-section="outline">
        <h2 class="text-xl font-semibold text-gray-900 mb-2">Outline Icons (24×24)</h2>
        <p class="text-gray-600 mb-2">Primary UI icons with outline style. Best for navigation, buttons, and general interface elements.</p>
        <p class="text-sm text-gray-500 mb-6" data-icon-count><%= outline_icons.size %> icons available</p>
        
        <div class="grid grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4">
          <% outline_icons.each do |icon| %>
            <div class="text-center group cursor-pointer" title="heroicons/outline/<%= icon %>" data-icon-name="<%= icon %>">
              <%= svg_icon("heroicons/outline/#{icon}", class: "h-6 w-6 text-gray-600 group-hover:text-blue-500 mx-auto mb-1 transition-colors") %>
              <p class="text-xs text-gray-400 truncate"><%= icon %></p>
            </div>
          <% end %>
        </div>
      </section>

      <!-- Solid Icons -->
      <section class="bg-white rounded-lg shadow p-6" data-icon-section="solid">
        <h2 class="text-xl font-semibold text-gray-900 mb-2">Solid Icons (24×24)</h2>
        <p class="text-gray-600 mb-2">Filled icons for emphasis and active states.</p>
        <p class="text-sm text-gray-500 mb-6" data-icon-count><%= solid_icons.size %> icons available</p>
        
        <div class="grid grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4">
          <% solid_icons.each do |icon| %>
            <div class="text-center group cursor-pointer" title="heroicons/solid/<%= icon %>" data-icon-name="<%= icon %>">
              <%= svg_icon("heroicons/solid/#{icon}", class: "h-6 w-6 text-gray-600 group-hover:text-blue-500 mx-auto mb-1 transition-colors") %>
              <p class="text-xs text-gray-400 truncate"><%= icon %></p>
            </div>
          <% end %>
        </div>
      </section>

      <!-- Mini Icons -->
      <section class="bg-white rounded-lg shadow p-6" data-icon-section="mini">
        <h2 class="text-xl font-semibold text-gray-900 mb-2">Mini Icons (20×20)</h2>
        <p class="text-gray-600 mb-2">Medium-sized icons for toolbars and compact UI elements.</p>
        <p class="text-sm text-gray-500 mb-6" data-icon-count><%= mini_icons.size %> icons available</p>
        
        <div class="grid grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4">
          <% mini_icons.each do |icon| %>
            <div class="text-center group cursor-pointer" title="heroicons/mini/<%= icon %>" data-icon-name="<%= icon %>">
              <%= svg_icon("heroicons/mini/#{icon}", class: "h-5 w-5 text-gray-600 group-hover:text-blue-500 mx-auto mb-1 transition-colors") %>
              <p class="text-xs text-gray-400 truncate"><%= icon %></p>
            </div>
          <% end %>
        </div>
      </section>

      <!-- Micro Icons -->
      <% if micro_icons.any? %>
      <section class="bg-white rounded-lg shadow p-6" data-icon-section="micro">
        <h2 class="text-xl font-semibold text-gray-900 mb-2">Micro Icons (16×16)</h2>
        <p class="text-gray-600 mb-2">Small icons designed for inline use with text or in very compact spaces.</p>
        <p class="text-sm text-gray-500 mb-6" data-icon-count><%= micro_icons.size %> icons available</p>
        
        <div class="grid grid-cols-6 md:grid-cols-10 lg:grid-cols-12 gap-4">
          <% micro_icons.each do |icon| %>
            <div class="text-center group cursor-pointer" title="heroicons/micro/<%= icon %>" data-icon-name="<%= icon %>">
              <%= svg_icon("heroicons/micro/#{icon}", class: "h-4 w-4 text-gray-600 group-hover:text-blue-500 mx-auto mb-1 transition-colors") %>
              <p class="text-xs text-gray-400 truncate"><%= icon %></p>
            </div>
          <% end %>
        </div>
      </section>
      <% end %>

      <!-- Custom Icons & Overrides -->
      <section class="bg-white rounded-lg shadow p-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">Custom Icons & Overrides</h2>
        <p class="text-gray-600 mb-6">
          This dummy app demonstrates how host applications can add custom icons or override existing ones.
        </p>
        
        <div class="space-y-6">
          <!-- Custom Icon -->
          <div>
            <h3 class="text-lg font-medium text-gray-900 mb-3">Custom Icon</h3>
            <p class="text-sm text-gray-600 mb-4">
              The <code class="bg-gray-100 px-1 rounded">custom/rocket</code> icon is defined only in the dummy app:
            </p>
            <div class="flex items-center gap-8">
              <div class="text-center">
                <%= svg_icon("custom/rocket", class: "h-12 w-12 text-indigo-600 mx-auto mb-2") %>
                <p class="text-xs text-gray-500">custom/rocket</p>
              </div>
              <div class="bg-gray-50 p-3 rounded flex-1">
                <pre class="text-xs text-gray-700"><code>&lt;%= svg_icon("custom/rocket", class: "h-12 w-12 text-indigo-600") %&gt;</code></pre>
              </div>
            </div>
          </div>

          <!-- Override Example -->
          <div>
            <h3 class="text-lg font-medium text-gray-900 mb-3">Icon Override</h3>
            <p class="text-sm text-gray-600 mb-4">
              The home icon has been customized in the dummy app (notice the chimney!):
            </p>
            <div class="flex items-center gap-8">
              <div class="text-center">
                <%= svg_icon("heroicons/outline/home", class: "h-12 w-12 text-green-600 mx-auto mb-2") %>
                <p class="text-xs text-gray-500">Overridden home icon</p>
              </div>
              <div class="bg-gray-50 p-3 rounded flex-1">
                <p class="text-xs text-gray-700 mb-2">
                  Located at: <code class="bg-gray-200 px-1 rounded">test/dummy/app/assets/images/heroicons/outline/home.svg</code>
                </p>
                <p class="text-xs text-gray-600">
                  This overrides the engine's default home icon
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Usage Examples -->
      <section class="bg-white rounded-lg shadow p-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">Usage Examples</h2>
        
        <div class="space-y-6">
          <!-- Button with Icon -->
          <div>
            <h3 class="text-lg font-medium text-gray-900 mb-2">Buttons with Icons</h3>
            <div class="flex flex-wrap gap-4">
              <button class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700">
                <%= svg_icon("heroicons/outline/plus", class: "h-4 w-4 mr-2") %>
                Add Item
              </button>
              
              <button class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                <%= svg_icon("heroicons/outline/magnifying-glass", class: "h-4 w-4 mr-2") %>
                Search
              </button>
              
              <button class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700">
                <%= svg_icon("heroicons/outline/trash", class: "h-4 w-4 mr-2") %>
                Delete
              </button>
            </div>
          </div>

          <!-- Navigation -->
          <div>
            <h3 class="text-lg font-medium text-gray-900 mb-2">Navigation</h3>
            <nav class="flex space-x-4">
              <a href="#" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900">
                <%= svg_icon("heroicons/solid/home", class: "h-4 w-4 mr-2") %>
                Home
              </a>
              <a href="#" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900">
                <%= svg_icon("heroicons/outline/document-text", class: "h-4 w-4 mr-2") %>
                Documents
              </a>
              <a href="#" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900">
                <%= svg_icon("heroicons/outline/cog-6-tooth", class: "h-4 w-4 mr-2") %>
                Settings
              </a>
            </nav>
          </div>

          <!-- Status Indicators -->
          <div>
            <h3 class="text-lg font-medium text-gray-900 mb-2">Status Indicators</h3>
            <div class="space-y-2">
              <div class="flex items-center">
                <%= svg_icon("heroicons/outline/check-circle", class: "h-5 w-5 text-green-500 mr-2") %>
                <span class="text-sm text-gray-900">Task completed successfully</span>
              </div>
              <div class="flex items-center">
                <%= svg_icon("heroicons/outline/exclamation-triangle", class: "h-5 w-5 text-yellow-500 mr-2") %>
                <span class="text-sm text-gray-900">Warning: Check your settings</span>
              </div>
              <div class="flex items-center">
                <%= svg_icon("heroicons/outline/x-mark", class: "h-5 w-5 text-red-500 mr-2") %>
                <span class="text-sm text-gray-900">Error: Unable to save</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Code Examples -->
      <section class="bg-white rounded-lg shadow p-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">Code Examples</h2>
        <div class="space-y-4">
          <div>
            <h3 class="font-medium text-gray-900 mb-2">Basic Usage</h3>
            <pre class="bg-gray-900 text-gray-100 p-4 rounded overflow-x-auto text-sm"><code>&lt;%= svg_icon("heroicons/outline/home") %&gt;</code></pre>
          </div>
          
          <div>
            <h3 class="font-medium text-gray-900 mb-2">With CSS Classes</h3>
            <pre class="bg-gray-900 text-gray-100 p-4 rounded overflow-x-auto text-sm"><code>&lt;%= svg_icon("heroicons/outline/user", class: "h-6 w-6 text-blue-500") %&gt;</code></pre>
          </div>
          
          <div>
            <h3 class="font-medium text-gray-900 mb-2">With Custom Attributes</h3>
            <pre class="bg-gray-900 text-gray-100 p-4 rounded overflow-x-auto text-sm"><code>&lt;%= svg_icon("heroicons/outline/search", 
    width: "24", 
    height: "24", 
    class: "text-gray-400") %&gt;</code></pre>
          </div>
        </div>
      </section>
    </div>
  </div>
</div>