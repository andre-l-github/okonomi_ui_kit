<div
  data-controller="upload"
  data-upload-target="dropzone"
  class="border-2 border-dashed border-gray-300 rounded-md p-6 text-center cursor-pointer hover:bg-gray-50 relative"
>
  <%= form.label method, class: "block cursor-pointer" do %>
    <div class="flex flex-col items-center text-gray-600 space-y-2">
      <div data-upload-target="preview" class="w-full flex justify-center items-center">
        <% if form.object.send(method).attached? %>
          <% blob = form.object.send(method).blob %>
          <% if blob.image? %>
            <%= image_tag url_for(blob), class: "max-h-32" %>
          <% else %>
            <%= svg_icon("heroicons/solid/document", class: "size-12 text-gray-400") %>
          <% end %>
        <% else %>
          <%= svg_icon("heroicons/solid/plus", class: "size-12 w-12 text-gray-400") %>
        <% end %>
      </div>

      <p class="text-sm text-gray-500" data-upload-target="filename">
        <% if form.object.send(method).attached? %>
          <%= form.object.send(method).filename %>
        <% else %>
          No file selected
        <% end %>
      </p>
    </div>

    <%= form.file_field method,
                        class: "hidden",
                        data: {
                          upload_target: "input",
                          action: "change->upload#updatePreview"
                        } %>
  <% end %>

  <%= form.hidden_field :"remove_#{method}", value: "0", data: { upload_target: "destroyInput" } %>

  <button type="button"
          data-action="upload#clear"
          class="absolute top-2 right-2 bg-red-100 text-red-700 px-2 py-1 text-xs rounded hover:bg-red-200">
    Clear
  </button>
</div>
